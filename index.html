<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>LearnByWriting</title>
    <link rel="stylesheet" href="./css/style.css" />
    <!-- for roboto font -->
    <link
      href="https://fonts.googleapis.com/css?family=Roboto&display=swap"
      rel="stylesheet"
    />
    <link
      type="text/css"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Google+Sans+Text:400&amp;text=%E2%86%90%E2%86%92%E2%86%91%E2%86%93"
    />

    <!-- bringing Icon for footer -->

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <!-- for fontawesome -->
    <script
      src="https://kit.fontawesome.com/40109df241.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <header>
      <nav>
        <div class="menu nav_small">
          <h1 class="ngana_logo">LearnByWriting</h1>
          <a class="menu_nav burger_menu nav_small"
            ><i class="fa fa-bars"></i
          ></a>
          <a href="./index.html" class="menu_nav small_device">Home</a>
          <a href="./html/blog.html" class="menu_nav small_device">Blogs</a>

          <a href="./html/books.html" class="menu_nav small_device">Books</a>
          <a
            href="./html/login.html"
            class="menu_nav small_device"
            id="loginMenu"
            >login</a
          >
          <a href="./html/login.html" class="menu_nav hire_now" id="join_us"
            >Join us</a
          >
        </div>
      </nav>
    </header>
    <section>
      <div class="hero_section">
        <div class="hero_content">
          <h2>Hello I'm Learning </h2>
          <h1>English,French & Polish</h1>
          <h2>By writing new words, stories,blogs, etc...</h2>
          <h4 class="hire_now hire_text">
            <a href="./html/register.html">Join us today</a>
          </h4>
        </div>
      </div>

      <!-- Top Promotions section-->
      <div class="statistic_section">
        <div class="stat_content">
          <span id="number_blog">0</span>
          <h4>Story wrote</h4>
        </div>
        <div class="stat_content stat_content_middle">
          <span id="number_books">0</span>
          <h4>Book read</h4>
        </div>
        <div class="stat_content">
          <span id="number_users">2</span>
          <h4>We are writing too</h4>
        </div>
      </div>

      <!-- who I am section section-->

      <div class="who_section">
        <div class="main_who">
          <!-- main who -->

          <div class="main_who_items">
            <img class="who_image" src="./images/tellstory.png" alt="book" />
            <div>
              <h2>Tell a story of your own...</h2>
              <p>Just a paragraph today, don't worry with the rest.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Services section -->

      <div class="service_section">
        <div class="Service_header">
          <h1>Just enjoy the journey!!</h1>
        </div>
        <div class="service_content">
          <div class="service_item">
            <div class="app_link banner_and_icon">
              <i class="fa-solid fa-pen-to-square"></i>
              <a href="./html/dashboard.html"
                ><h5 class="service_title">Write English</h5></a
              >
            </div>
          </div>
          <div class="service_item">
            <div class="app_link banner_and_icon">
              <i class="fa-solid fa-floppy-disk"></i>
              <a href="./html/vocabulary.html"
                ><h5 class="service_title">New vocabularies</h5></a
              >
            </div>
          </div>
          <div class="service_item">
            <div class="app_link banner_and_icon">
              <i class="fa-solid fa-book-open-reader"></i>
              <a href="./html/stories.html"
                ><h5 class="service_title">Stories</h5></a
              >
            </div>
          </div>
          <div class="service_item">
            <div class="app_link banner_and_icon">
              <i class="fa-solid fa-gamepad"></i>
              <a href="./html/games.html"
                ><h5 class="service_title">Play games</h5></a
              >
            </div>
          </div>
        </div>
      </div>

      <!-- for portfolio -->

      <div class="portfolio_section">
        <div class="header_portfolio">
          <h1>Expore the your world by writing everyday</h1>
          <p>Find below your joy to learn something new...</p>
        </div>

        <div class="portfolio_nav" id="category_to_show">
          <h1 id="all_button" class="all_button">All</h1>
          <h1 id="books_button" class="books_button">Books to read</h1>
          <h1 id="blogs_button" class="blogs_button">Blog or story to ready</h1>
          <h1 id="words_button" class="words_button">New words we read.</h1>
        </div>
        <!-- image showing categories  -->

        <div class="portfolio_content">
          <div class="portfolio_item books">
            <div class="portfolio_image">
              <img src="./images/book_read.jpg" alt="read book" />
            </div>
          </div>

          <div class="portfolio_item blogs">
            <div class="portfolio_image">
              <img src="./images/story.png" alt="blog to read" />
            </div>
          </div>

          <div class="portfolio_item words">
            <div class="portfolio_image">
              <img src="./images/aboutme.jpg" alt="" />
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- footer info and details -->

    <footer>
      <div class="footer support">
        <h3>Phone support if you are looking a way to join</h3>
        <p>24 hours a day</p>
        <p>+2507887573743</p>
      </div>
      <div class="footer social_media">
        <h3>Get intouch with us</h3>
        <i class="fa fa-facebook"></i>
        <i class="fa fa-instagram"></i>
        <i class="fa fa-twitter"></i>
      </div>
      <div class="footer subscribe">
        <h3>Subscribe to our blog</h3>
        <p>Singup for our offer</p>

        <div class="footer_input">
          <input type="text" name="email" id="email_subscribution" />
          <input class="footer_submit" type="submit" value="Subscribe" />
        </div>
      </div>
    </footer>
  </body>

  <script src="./Js/script.js"></script>
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-app.js";
    import {
      getDatabase,
      set,
      ref,
      onValue,
    } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-database.js";

    import {
      getAuth,
      createUserWithEmailAndPassword,
      signInWithEmailAndPassword,
      onAuthStateChanged,
    } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-auth.js";

    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyA5sPlupW_n1XEt6xsw_Y7aAZKltGEFyXw",
      authDomain: "mybrand-df7b7.firebaseapp.com",
      projectId: "mybrand-df7b7",
      storageBucket: "mybrand-df7b7.appspot.com",
      messagingSenderId: "1073877765217",
      appId: "1:1073877765217:web:7f63596f42c5d4ca18ae20",
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase();
    const auth = getAuth();

    //function to get input value
    function getInputValue(id) {
      return document.getElementById(id).value;
    }

    const blogs = ref(database, "blogs/");
    onValue(blogs, (snapshot) => {
      const data = snapshot.val();

      let blogsArray = [];

      for (var [key, value] of Object.entries(data)) {
        var obj = {
          id: value.id,
          title: value.title,
          body: value.body,
          Image: value.Image,
          uid_key: key,
        };
        blogsArray.push(obj);
      }

      const dataSave = JSON.stringify(blogsArray);
      // set number of blogs or article
      const blogNumbers = document.getElementById("number_blog");
      blogNumbers.innerText = blogsArray.length;
      // save to localStorage
      localStorage.setItem("data", dataSave);
    });

    // number fo books
    const books = ref(database, "books/");
    onValue(books, (snapshot) => {
      const data = snapshot.val() ? snapshot.val() : "no data for book yet";

      let booksArray = [];

      for (var [key, value] of Object.entries(data)) {
        var obj = {
          id: value.id,
          title: value.title,
          author: value.author,
          Image: value.Image,
          reading: value.reading,
          uid_key: key,
        };
        booksArray.push(obj);
      }

      const dataSave = JSON.stringify(booksArray);
      // set number of blogs or article
      const bookNumbers = document.getElementById("number_books");
      bookNumbers.innerText = booksArray ? booksArray.length : 0;
      // save to localStorage
      localStorage.setItem("data", dataSave);
    });

    const retrieve = (section) => {
      console.log(section.innerHTML);
    };

    //for category to show on home page logic need to be tweeked
    const categoryToShow = document.getElementById("category_to_show");
    const items = document.querySelectorAll(".portfolio_item");

    categoryToShow.addEventListener("click", (e) => {
      if (e.target.className.includes("books_button")) {
        retrieve(e.target);
        items.forEach((element) => {
          if (!element.className.includes("books")) {
            console.log(element);
            element.classList.add("hide");
          } else {
            element.classList.remove("hide");
          }
        });
      }
      if (e.target.className.includes("blogs_button")) {
        retrieve(e.target);
        items.forEach((element) => {
          if (!element.className.includes("blogs")) {
            console.log(element);
            element.classList.add("hide");
          } else {
            element.classList.remove("hide");
          }
        });
      }
      if (e.target.className.includes("words_button")) {
        retrieve(e.target);
        items.forEach((element) => {
          if (!element.className.includes("words")) {
            console.log(element);
            element.classList.add("hide");
          } else {
            element.classList.remove("hide");
          }
        });
      }
      if (e.target.className.includes("all_button")) {
        retrieve(e.target);
        items.forEach((element) => {
          if (element.className.includes("hide")) {
            element.classList.remove("hide");
          }
        });
      }
    });

    // check if user is logged in
    onAuthStateChanged(auth, (user) => {
      if (user) {
        const uid = user.uid;
        console.log(user);
        const loginMenu = document.getElementById("loginMenu");
        const join_us = document.getElementById("join_us");
        loginMenu.innerHTML = "Dashboard";
        loginMenu.setAttribute("href", "./html/dashboard.html");
        join_us.innerHTML = "Your Vocabulary";
        join_us.setAttribute("href", "./html/vocabulary.html");

        console.log("yes it is possible");
        // ...
      }
    });
  </script>
</html>
